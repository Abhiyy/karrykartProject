@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_LayoutMaster.cshtml";
}

<script src="~/Scripts/App/OrderCtrl.js"></script>
<div class="row">
    <ul class="breadcrumb">
        <li><a href="@Url.Action("Index", "Home")">Home</a></li>
        <li><a href="@Url.Action("Index", "Order")">Order</a></li>
        <li class="active">Details</li>
    </ul>
</div>


<div class="row">
    <div class="col-lg-12" ng-controller="OrderController">
        <h2>Order Details</h2>
        <hr />
        <form name="formBasicDetails" class="form-horizontal">
            <div class="form-group">
                <label class="col-lg-3 control-label strong" for="order.OrderID">Order ID</label>
                <div class="col-lg-7">
                    <p class="text-primary">{{order.OrderID}}</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label strong" for="order.OrderPlacedDateTime">Placed On</label>
                <div class="col-lg-7">
                    <p class="">{{order.OrderPlacedDateTime}}</p>
                </div>
            </div>

            <div class="form-group">
                <label class="col-lg-3 control-label strong" for="order.GuestCheckout">Guest Checkout</label>
                <div class="col-lg-7">
                    <p class="">{{order.GuestCheckout?"Yes":"No"}}</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label strong" for="order.TotalAmount">Total Amount</label>
                <div class="col-lg-4">
                    <input type="text" ng-model="order.TotalAmount" name="totalAmount" class="form-control" />
                </div>
                <div class="col-lg-4">
                    <button class="btn btn-sm btn-primary" ng-click="adjustOrderAmount()">Adjust Amount</button>
                </div>
            </div>

            <div class="form-group">
                <label class="col-lg-3 control-label strong" for="order.TotalAmount">Payment Type</label>
                <div class="col-lg-7">
                    <p class="">{{order.PaymentType}}</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label strong" for="order.TotalAmount">Payment Received</label>
                <div class="col-lg-7">
                    <input type="checkbox" ng-model="order.isPaymentSuccessful" ng-change="UpdatePaymentStatus()" />
                </div>
            </div>

            <div class="form-group">

                <label class="col-lg-3 control-label" for="product.CategoryID">Order Status</label>
                <div class="col-lg-4">
                    <select ng-options="s.Value as s.Description for s in orderstatuses" ng-init="order.OrderStatusID" ng-model="order.OrderStatusID" class="form-control" name="orderstatuses" id="orderstatuses"></select>
                </div>
                <div class="col-lg-3">
                    <button class="btn btn-sm btn-primary" ng-click="updateOrder()">Update Status</button>
                </div>
            </div>
        </form>
        <h2>Delivery Details</h2>
        <hr />
        <div class="row">
            <div class="Col-log-12">
                <h4>To:</h4>
                <p>
                    {{order.User.FirstName}} {{order.User.LastName}}
                </p>
                <h4>Contact Number:</h4>
                <p>
                    {{order.User.Phone}}
                </p>
                <h4>Address:</h4>
                <p>
                    {{order.DeliveryAddress.AddressLine1}},<br />
                    {{order.DeliveryAddress.AddressLine2}},<br />
                    City - {{order.DeliveryAddress.City}},<br />
                    State - {{order.DeliveryAddress.State}},<br />
                    Country - {{order.DeliveryAddress.Country}},<br />
                    Pincode - {{order.DeliveryAddress.PinCode}}.<br />
                    Landmark - {{order.DeliveryAddress.LandMark}}<br />
                </p>
            </div>
        </div>
        <h2>Products Included</h2>


        <div class="row">
            <div class="col-lg-12">
                <table class="table table-striped table-hover">
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Category</th>
                        <th>SubCategory</th>
                        <th>Brand</th>
                        <th>Active</th>
                        <th>Image</th>
                        <th>Price (INR)</th>
                        <th>Shipping Cost (INR)</th>
                        <th>Unit</th>
                        <th>Quantity</th>
                    </tr>
                    <tbody>
                        <tr ng-repeat="op in order.OrderProducts">
                            <td>{{op.Key.ProductID}}</td>
                            <td>{{op.Key.Name}}</td>
                            <td>{{op.Key.CategoryName}}</td>
                            <td>{{op.Key.SubCategoryName}}</td>
                            <td>{{op.Key.BrandName}}</td>
                            <td>{{op.Key.Active? "Yes" : "No"}}</td>
                            <td>
                                <img src="{{op.Key.Images[0].ImageLink}}" alt="ProductImage" /></td>
                            <td>{{op.Key.Prices[0].Price}}</td>
                            <td>{{op.Key.ShippingDetails[0].Cost}}</td>
                            <td>{{op.Key.ProductSizeMappings[0].UnitName}}</td>
                            <td>{{op.Value}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <hr />
        <a href="@Url.Action("Index", "Order")" class="btn btn-danger">Back <i class="fa fa-backward"></i></a>
    </div>
</div>



