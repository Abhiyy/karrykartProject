<style> 

.bar { fill: #0bbcd5;}
.toolTip {
  position: absolute;
  display: none;
  height: auto;
  background: none repeat scroll 0 0 #fff;
  border: 1px solid #0bbcd5;
  padding:10px;
  text-align: center;
  color:#000;
  border-radius:5px;
}
</style>

<div class="row">
    <div class="col-md-12">
        <h3>Karrykart Sales</h3>
        <hr />
       <div id="salesChart">

       </div>
    </div>
</div>

<script type="text/javascript"> 

    var data = [{ Category: "Oct", Value: 2514 },
                { Category: "Nov", Value: 3000 },
                { Category: "Jan", Value: 4000 },
                { Category: "Feb", Value: 3550 },
                { Category: "Mar", Value: 12354 }
    ]

    function BuildBarChart(vType) {
        $.ajax('@Url.Action("GetSalesRevenueData","Chart")', {
            type: 'GET',  // http method
            data: { type: vType },  // data to submit
            success: function (data, status, xhr) {
                drawBarChart('#salesChart', data);
            },
            error: function (jqXhr, textStatus, errorMessage) {
                $('p').append('Error' + errorMessage);
            }
        });
    }

    function drawBarChart(divIDtoDraw,dataset)
    {
        var tooltip = d3.select("body").append("div").attr("class", "toolTip");

        var margin = { top: 20, right: 20, bottom: 30, left: 40 },
            width = 700 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var x = d3.scaleBand()
          .range([0, width])
          .padding(0.1);
        var y = d3.scaleLinear()
                  .range([height, 0]);

        var svg = d3.select(divIDtoDraw).append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform",
                      "translate(" + margin.left + "," + margin.top + ")");

        x.domain(dataset.map(function (d) { return d.Category; }));
        y.domain([0, d3.max(dataset, function (d) { return d.Value; })]);

        svg.selectAll(".bar")
           .data(dataset)
           .enter().append("rect")
           .attr("class", "bar")
           .attr("x", function (d) { return x(d.Category); })
           .attr("width", x.bandwidth())
           .attr("y", function (d) { return y(d.Value); })
           .style("cursor","pointer")
           .attr("height", function (d) { return height - y(d.Value); })
            //.on("mousemove", function (d) {
            //    tooltip
            //      .style("left", d3.event.pageX - 50 + "px")
            //      .style("top", d3.event.pageY - 70 + "px")
            //      .style("display", "inline-block")
            //      .html((d.Category) + "<br>" + "INR " + (d.Value));
            //})
            .on("mouseenter", function (d) {
            tooltip
              .style("left", d3.event.pageX - 50 + "px")
              .style("top", d3.event.pageY - 70 + "px")
              .style("display", "inline")
              .html((d.Category) + "<br>" + "INR " + (d.Value));
        })
    		.on("mouseout", function (d) { tooltip.style("display", "none"); });

        svg.append("g")
           .attr("transform", "translate(0," + height + ")")
           .call(d3.axisBottom(x));

        // add the y Axis
        svg.append("g")
           .call(d3.axisLeft(y));

    }

    BuildBarChart("months");

</script>